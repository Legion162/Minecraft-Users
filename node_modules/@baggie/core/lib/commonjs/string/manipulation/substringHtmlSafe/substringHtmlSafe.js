"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.substringHtmlSafe = void 0;
/**
 * Get part of a string between the start and end indexes, or to the end of the
 * string. HTML entities are each counted as one character, and HTML tags are
 * ignored.
 */
const substringHtmlSafe = (string, indexStart, indexEnd, options) => {
  const end = typeof indexEnd === "undefined" ? undefined : indexEnd < 1 ? indexEnd - 1 : indexEnd;
  const regex = new RegExp(`&#?[a-z0-9]+;|<[a-z]+[^>]*\\/>|<[a-z]+[^>]*>.?|.<\\/[a-z]+>|.?`, "gi");
  const splitString = string.match(regex);
  const slicedString = splitString.slice(indexStart, end).join("");
  const tempElement = ((options === null || options === void 0 ? void 0 : options.document) || document).createElement("div");
  tempElement.innerHTML = slicedString;
  const output = tempElement.innerHTML;
  const realIndexStart = options !== null && options !== void 0 && options.verbose ? splitString.slice(0, indexStart).join("").length : 0;
  return options !== null && options !== void 0 && options.verbose ? {
    output,
    realIndexStart,
    realIndexEnd: realIndexStart + slicedString.length
  } : output;
};
exports.substringHtmlSafe = substringHtmlSafe;
//# sourceMappingURL=substringHtmlSafe.js.map